{"version":3,"file":"xhr.js","sourceRoot":"","sources":["../../../src/js/utils/xhr.ts"],"names":[],"mappings":"AAAA,OAAO,EAAE,aAAa,EAAE,MAAM,aAAa,CAAC;AAE5C,MAAM,mBAAmB,GAAG,qBAAqB,CAAC;AAOlD;;;;;;;GAOG;AACH,MAAM,CAAC,MAAM,mBAAmB,GAAG,CAAC,CAAC;AAErC;;;;;GAKG;AACH,MAAM,UAAU,gBAAgB,CAC9B,eAA2D,aAAa;IAExE,IAAI,CAAC,YAAY,CAAC,cAAc,EAAE;QAChC,OAAO,IAAI,CAAC;KACb;IAED,MAAM,GAAG,GAAqC,IAAI,YAAY,CAAC,cAAc,EAAE,CAAC;IAChF,IAAI,GAAG,CAAC,IAAI,CAAC,mBAAmB,EAAE;QAChC,GAAG,CAAC,IAAI,GAAG,GAAG,CAAC,IAAI,CAAC,mBAAmB,CAAC;KACzC;IACD,IAAI,GAAG,CAAC,IAAI,CAAC,mBAAmB,EAAE;QAChC,GAAG,CAAC,IAAI,GAAG,GAAG,CAAC,IAAI,CAAC,mBAAmB,CAAC;KACzC;IACD,OAAO,GAAG,CAAC;AACb,CAAC","sourcesContent":["import { RN_GLOBAL_OBJ } from './worldwide';\n\nconst __sentry_original__ = '__sentry_original__';\n\ntype XMLHttpRequestWithSentryOriginal = XMLHttpRequest & {\n  open: typeof XMLHttpRequest.prototype.open & { [__sentry_original__]?: typeof XMLHttpRequest.prototype.open };\n  send: typeof XMLHttpRequest.prototype.send & { [__sentry_original__]?: typeof XMLHttpRequest.prototype.send };\n};\n\n/**\n * The DONE ready state for XmlHttpRequest\n *\n * Defining it here as a constant b/c XMLHttpRequest.DONE is not always defined\n * (e.g. during testing, it is `undefined`)\n *\n * @see {@link https://developer.mozilla.org/en-US/docs/Web/API/XMLHttpRequest/readyState}\n */\nexport const XHR_READYSTATE_DONE = 4;\n\n/**\n * Creates a new XMLHttpRequest object which is not instrumented by the SDK.\n *\n * This request won't be captured by the HttpClient Errors integration\n * and won't be added to breadcrumbs and won't be traced.\n */\nexport function createStealthXhr(\n  customGlobal: { XMLHttpRequest?: typeof XMLHttpRequest } = RN_GLOBAL_OBJ,\n): XMLHttpRequest | null {\n  if (!customGlobal.XMLHttpRequest) {\n    return null;\n  }\n\n  const xhr: XMLHttpRequestWithSentryOriginal = new customGlobal.XMLHttpRequest();\n  if (xhr.open.__sentry_original__) {\n    xhr.open = xhr.open.__sentry_original__;\n  }\n  if (xhr.send.__sentry_original__) {\n    xhr.send = xhr.send.__sentry_original__;\n  }\n  return xhr;\n}\n"]}