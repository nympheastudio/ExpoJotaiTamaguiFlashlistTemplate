{"version":3,"sources":["MaskedTextInput.tsx"],"names":["React","useEffect","useState","forwardRef","TextInput","mask","unMask","MaskedTextInputComponent","ref","pattern","type","options","defaultValue","onChangeText","inputAccessoryView","rest","defaultValueCustom","defaultValueCurrency","initialMaskedValue","initialUnMaskedValue","maskedValue","setMaskedValue","unMaskedValue","setUnmaskedValue","onChange","value","newUnMaskedValue","newMaskedValue","MaskedTextInput"],"mappings":";;AAAA,OAAOA,KAAP,IACEC,SADF,EAEEC,QAFF,EAGEC,UAHF,QAKO,OALP;AAMA,SAASC,SAAT,QAA0C,cAA1C;AACA,SAASC,IAAT,EAAeC,MAAf,QAA6B,eAA7B;AAcA,OAAO,MAAMC,wBAGZ,GAAG,OAUFC,GAVE,KAWc;AAAA,MAVhB;AACEH,IAAAA,IAAI,EAAEI,OAAO,GAAG,EADlB;AAEEC,IAAAA,IAAI,GAAG,QAFT;AAGEC,IAAAA,OAAO,GAAG,EAHZ;AAIEC,IAAAA,YAJF;AAKEC,IAAAA,YALF;AAMEC,IAAAA,kBANF;AAOE,OAAGC;AAPL,GAUgB;AAChB,QAAMC,kBAAkB,GAAGJ,YAAY,IAAI,EAA3C;AACA,QAAMK,oBAAoB,GAAGL,YAAY,IAAI,GAA7C;AAEA,QAAMM,kBAAkB,GAAMR,IAAI,KAAK,UAAT,GACxBL,IAAI,CAACY,oBAAD,EAAuBR,OAAvB,EAAgCC,IAAhC,EAAsCC,OAAtC,CADoB,GAExBN,IAAI,CAACW,kBAAD,EAAqBP,OAArB,EAA8BC,IAA9B,EAAoCC,OAApC,CAFV;AAIA,QAAMQ,oBAAoB,GAAMT,IAAI,KAAK,UAAT,GAC1BJ,MAAM,CAACW,oBAAD,EAAuBP,IAAvB,CADoB,GAE1BJ,MAAM,CAACU,kBAAD,EAAqBN,IAArB,CAFZ;AAIA,QAAM,CAACU,WAAD,EAAcC,cAAd,IAAgCnB,QAAQ,CAACgB,kBAAD,CAA9C;AACA,QAAM,CAACI,aAAD,EAAgBC,gBAAhB,IAAoCrB,QAAQ,CAACiB,oBAAD,CAAlD;;AAEA,WAASK,QAAT,CAAkBC,KAAlB,EAAiC;AAC/B,UAAMC,gBAAgB,GAAGpB,MAAM,CAACmB,KAAD,EAAQf,IAAR,CAA/B;AACA,UAAMiB,cAAc,GAAGtB,IAAI,CAACqB,gBAAD,EAAmBjB,OAAnB,EAA4BC,IAA5B,EAAkCC,OAAlC,CAA3B;AAEAU,IAAAA,cAAc,CAACM,cAAD,CAAd;AACAJ,IAAAA,gBAAgB,CAACG,gBAAD,CAAhB;AACD;;AAEDzB,EAAAA,SAAS,CAAC,MAAM;AACdY,IAAAA,YAAY,CAACO,WAAD,EAAcE,aAAd,CAAZ;AACD,GAFQ,EAEN,CAACF,WAAD,EAAcE,aAAd,CAFM,CAAT;AAIA,sBACE,uDACE,oBAAC,SAAD;AACE,IAAA,YAAY,EAAGG,KAAD,IAAWD,QAAQ,CAACC,KAAD,CADnC;AAEE,IAAA,GAAG,EAAEjB;AAFP,KAGMO,IAHN;AAIE,IAAA,KAAK,EAAEK;AAJT,KADF,EAOGN,kBAPH,CADF;AAWD,CApDM;AAsDP,OAAO,MAAMc,eAAe,gBAAGzB,UAAU,CAACI,wBAAD,CAAlC","sourcesContent":["import React, {\n  useEffect,\n  useState,\n  forwardRef,\n  ForwardRefRenderFunction,\n} from 'react'\nimport { TextInput, TextInputProps } from 'react-native'\nimport { mask, unMask } from '../utils/mask'\nimport type { MaskOptions } from '../@types/MaskOptions'\n\ntype TIProps = Omit<TextInputProps, 'onChangeText'>\n\nexport interface MaskedTextInputProps extends TIProps {\n  mask?: string\n  type?: 'custom' | 'currency'\n  options?: MaskOptions\n  defaultValue?: string\n  onChangeText: (text: string, rawText: string) => void\n  inputAccessoryView?: JSX.Element;\n}\n\nexport const MaskedTextInputComponent: ForwardRefRenderFunction<\n  TextInput,\n  MaskedTextInputProps\n> = (\n  {\n    mask: pattern = '',\n    type = 'custom',\n    options = {} as MaskOptions,\n    defaultValue,\n    onChangeText,\n    inputAccessoryView,\n    ...rest\n  },\n  ref\n): JSX.Element => {\n  const defaultValueCustom = defaultValue || ''\n  const defaultValueCurrency = defaultValue || '0'\n\n  const initialMaskedValue =    type === 'currency'\n      ? mask(defaultValueCurrency, pattern, type, options)\n      : mask(defaultValueCustom, pattern, type, options);\n\n  const initialUnMaskedValue =    type === 'currency'\n      ? unMask(defaultValueCurrency, type)\n      : unMask(defaultValueCustom, type);\n\n  const [maskedValue, setMaskedValue] = useState(initialMaskedValue);\n  const [unMaskedValue, setUnmaskedValue] = useState(initialUnMaskedValue);\n\n  function onChange(value: string) {\n    const newUnMaskedValue = unMask(value, type);\n    const newMaskedValue = mask(newUnMaskedValue, pattern, type, options);\n\n    setMaskedValue(newMaskedValue);\n    setUnmaskedValue(newUnMaskedValue);\n  }\n\n  useEffect(() => {\n    onChangeText(maskedValue, unMaskedValue);\n  }, [maskedValue, unMaskedValue]);\n\n  return (\n    <>\n      <TextInput\n        onChangeText={(value) => onChange(value)}\n        ref={ref}\n        {...rest}\n        value={maskedValue}\n      />\n      {inputAccessoryView}\n    </>\n  );\n};\n\nexport const MaskedTextInput = forwardRef(MaskedTextInputComponent);\n"]}