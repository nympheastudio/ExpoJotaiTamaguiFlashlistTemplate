{"version":3,"sources":["MaskedTextInput.tsx"],"names":["MaskedTextInputComponent","ref","mask","pattern","type","options","defaultValue","onChangeText","inputAccessoryView","rest","defaultValueCustom","defaultValueCurrency","initialMaskedValue","initialUnMaskedValue","maskedValue","setMaskedValue","unMaskedValue","setUnmaskedValue","onChange","value","newUnMaskedValue","newMaskedValue","MaskedTextInput"],"mappings":";;;;;;;AAAA;;AAMA;;AACA;;;;;;;;AAcO,MAAMA,wBAGZ,GAAG,OAUFC,GAVE,KAWc;AAAA,MAVhB;AACEC,IAAAA,IAAI,EAAEC,OAAO,GAAG,EADlB;AAEEC,IAAAA,IAAI,GAAG,QAFT;AAGEC,IAAAA,OAAO,GAAG,EAHZ;AAIEC,IAAAA,YAJF;AAKEC,IAAAA,YALF;AAMEC,IAAAA,kBANF;AAOE,OAAGC;AAPL,GAUgB;AAChB,QAAMC,kBAAkB,GAAGJ,YAAY,IAAI,EAA3C;AACA,QAAMK,oBAAoB,GAAGL,YAAY,IAAI,GAA7C;AAEA,QAAMM,kBAAkB,GAAMR,IAAI,KAAK,UAAT,GACxB,gBAAKO,oBAAL,EAA2BR,OAA3B,EAAoCC,IAApC,EAA0CC,OAA1C,CADwB,GAExB,gBAAKK,kBAAL,EAAyBP,OAAzB,EAAkCC,IAAlC,EAAwCC,OAAxC,CAFN;AAIA,QAAMQ,oBAAoB,GAAMT,IAAI,KAAK,UAAT,GAC1B,kBAAOO,oBAAP,EAA6BP,IAA7B,CAD0B,GAE1B,kBAAOM,kBAAP,EAA2BN,IAA3B,CAFN;AAIA,QAAM,CAACU,WAAD,EAAcC,cAAd,IAAgC,qBAASH,kBAAT,CAAtC;AACA,QAAM,CAACI,aAAD,EAAgBC,gBAAhB,IAAoC,qBAASJ,oBAAT,CAA1C;;AAEA,WAASK,QAAT,CAAkBC,KAAlB,EAAiC;AAC/B,UAAMC,gBAAgB,GAAG,kBAAOD,KAAP,EAAcf,IAAd,CAAzB;AACA,UAAMiB,cAAc,GAAG,gBAAKD,gBAAL,EAAuBjB,OAAvB,EAAgCC,IAAhC,EAAsCC,OAAtC,CAAvB;AAEAU,IAAAA,cAAc,CAACM,cAAD,CAAd;AACAJ,IAAAA,gBAAgB,CAACG,gBAAD,CAAhB;AACD;;AAED,wBAAU,MAAM;AACdb,IAAAA,YAAY,CAACO,WAAD,EAAcE,aAAd,CAAZ;AACD,GAFD,EAEG,CAACF,WAAD,EAAcE,aAAd,CAFH;AAIA,sBACE,yEACE,6BAAC,sBAAD;AACE,IAAA,YAAY,EAAGG,KAAD,IAAWD,QAAQ,CAACC,KAAD,CADnC;AAEE,IAAA,GAAG,EAAElB;AAFP,KAGMQ,IAHN;AAIE,IAAA,KAAK,EAAEK;AAJT,KADF,EAOGN,kBAPH,CADF;AAWD,CApDM;;;AAsDA,MAAMc,eAAe,gBAAG,uBAAWtB,wBAAX,CAAxB","sourcesContent":["import React, {\n  useEffect,\n  useState,\n  forwardRef,\n  ForwardRefRenderFunction,\n} from 'react'\nimport { TextInput, TextInputProps } from 'react-native'\nimport { mask, unMask } from '../utils/mask'\nimport type { MaskOptions } from '../@types/MaskOptions'\n\ntype TIProps = Omit<TextInputProps, 'onChangeText'>\n\nexport interface MaskedTextInputProps extends TIProps {\n  mask?: string\n  type?: 'custom' | 'currency'\n  options?: MaskOptions\n  defaultValue?: string\n  onChangeText: (text: string, rawText: string) => void\n  inputAccessoryView?: JSX.Element;\n}\n\nexport const MaskedTextInputComponent: ForwardRefRenderFunction<\n  TextInput,\n  MaskedTextInputProps\n> = (\n  {\n    mask: pattern = '',\n    type = 'custom',\n    options = {} as MaskOptions,\n    defaultValue,\n    onChangeText,\n    inputAccessoryView,\n    ...rest\n  },\n  ref\n): JSX.Element => {\n  const defaultValueCustom = defaultValue || ''\n  const defaultValueCurrency = defaultValue || '0'\n\n  const initialMaskedValue =    type === 'currency'\n      ? mask(defaultValueCurrency, pattern, type, options)\n      : mask(defaultValueCustom, pattern, type, options);\n\n  const initialUnMaskedValue =    type === 'currency'\n      ? unMask(defaultValueCurrency, type)\n      : unMask(defaultValueCustom, type);\n\n  const [maskedValue, setMaskedValue] = useState(initialMaskedValue);\n  const [unMaskedValue, setUnmaskedValue] = useState(initialUnMaskedValue);\n\n  function onChange(value: string) {\n    const newUnMaskedValue = unMask(value, type);\n    const newMaskedValue = mask(newUnMaskedValue, pattern, type, options);\n\n    setMaskedValue(newMaskedValue);\n    setUnmaskedValue(newUnMaskedValue);\n  }\n\n  useEffect(() => {\n    onChangeText(maskedValue, unMaskedValue);\n  }, [maskedValue, unMaskedValue]);\n\n  return (\n    <>\n      <TextInput\n        onChangeText={(value) => onChange(value)}\n        ref={ref}\n        {...rest}\n        value={maskedValue}\n      />\n      {inputAccessoryView}\n    </>\n  );\n};\n\nexport const MaskedTextInput = forwardRef(MaskedTextInputComponent);\n"]}